
=== Page 1 ===
HIW/E9MOCT Shenzhen Hiwonder Technology Co,Ltd

Lesson 6 Train YOLOv5 Model - Dateset
Collection

1. Image Collection

@ The input command should be case sensitive, and “Tab” key can be

used to complement the key words.

If you use the system image we provide, you can find the corresponding
program in the folder “3 Basic Operation Course -> 2. Introduction to

System Desktop .”

Training a YOLOv5 model requires a large amount of data, so we need to

start with the data collection and annotation the data for model training.
1) Power on Jetson Orin Nano, and connect it to NoMachine.
2) Connect the USB camera to the Jetson Orin Nano.

3) Minimize the NoMachine desktop, then drag the “data_gather.py” file

from the same directory to the system desktop.

® data_gather
@ labelimg

FF tensorflow-2.11.0+nv23.01-cp38-cp3...
| od torch-1.12.0a0+2c916ef.nv22.3-cp38-... 5 5, B
torchvision-(V0.13.0) 5:16 F arf 9g KB data_dather.py

® yolovs

~~,

4) Double click MEME to open the command-line terminal.
5) Enter the command to access the system desktop.

cd Desktop/



=== Page 2 ===
Hiweander Shenzhen Hiwonder Technology Co,Ltd

:~$ cd Desktop/
$f

6) Enter the command to start collecting the data.

python3 data_gather.py

S python3 data gather. py

DEAR RF

Press “s” to capture images, and press “q” to exit the program.

7) During the image capture process, the images will be saved in the

directory specified by the text prompt.

S$ python3 data gather.py

INARA Re, KSEE MIERRE

et
et

- Bi. /ma_data/IPEGImages
el}. /ma_data/JPEGImages
el]. /ma_data/JPEGImages
el]. /ma_data/JIPEGImages
el}. /ma_data/JPEGImages
./ma_data/JPEGImages
EI]. /ma_data/IJPEGImages
./ma_data/JPEGImages
./ma_data/JPEGImages
ER 104k BI. /ma_data/JIPEGImages
Sp 4 al Fy 2. bine ly ee

u

J

Os DS DS sD OS

< [2

FI mages
If the camera feed appears, it indicates that the program is running

properly:



=== Page 3 ===
Hiweander Shenzhen Hiwonder Technology Co,Ltd

Note:

1) Press “s” to save the captured image. Holding it down will save images

continuously.

2 Press “q” to exit the program.

3) To improve model reliability, capture target recognition content from

different distances, angles, and orientations.

After starting data collection, a “My_data” folder will be created on the
desktop. It will contain three subfolders: Annotations, imageSets, and
JPEGImages. The JPEGImages folder is used to store images, Annotations is

for staring annotation files, imageSets is for storing image paths.

2. Image Annotation

Note: the entered command should be case sensitive and “Tab” key can be

used to auto-complete keywords.

1) Minimize NoMachine desktop, and drag “labellmg.zip” from the same

directory with this document to NoMachine desktop.

3



=== Page 4 ===
Hiweander Shenzhen Hiwonder Technology Co,Ltd

Zi exo 2a Fuh . i

® data gather
FF tensorflow-2.11.0+nv23.01-cp38-cp3...
FP torch-1.12.0a0+2c916ef.nv22.3-cp38-... 2

88 torchvision-(V0.13.0)
B® yolovs

2) Double click MEUMMMEM to open the command-line terminal.
3) Enter the command to access the system desktop.

cd Desktop/

S$ cd Desktop/

$

4) Enter command to extract the file to the desktop.

unzip labelImg.zip -d ./

$ unzip LabelImg.zip -d ./

Archive: lLlabelImg.zip

5) Enter the command to enter the labellmg folder.

cd labeliImg/

: S$ cd LabelImg/
: $

6) Enter the command to install qgyqt6 and the necessary extension tools.

sudo apt-get install pyqt5-dev-tools



=== Page 5 ===
Hiweander Shenzhen Hiwonder Technology Co,Ltd

$ sudo apt-get install pyqt5-dev-tools

[sudo] password for ubuntu:

Reading package lists... Done

Building dependency tree

Reading state information... Done

The following packages were automatically installed and are no longer required:
apt-clone archdetect-deb bogl-bterm busybox-static cryptsetup-bin
dctrl-tools dpkg-repack gdal-data giri.2-timezonemap-1.0 gir1.2-xkl-1.0
grub-common LibaecO Libarmadillo9 Libarpack2 Libavresample-dev
Libavresample4 Libcfitsio8 Libcharls2 lLibdap25 Libdapclient6v5
Libdc1394-22-dev Libdebian-installer4 lLibepsiloni lLibexif-dev Libfreex11
Libfyba® Libgdal26 Libgdcm-dev lLibgdcm3.0 Libgeos-3.8.0 Libgeos-civS
Libgeotiff5 lLibgl2ps1.4 Libgphoto2-dev lLibhdf4-0-alt Libhdf5-103
Libhdf5-openmpi-103 lLibilmbase-dev lLibjbig-dev lLibkmlbase1 lLibkmldom1
Libkmlengine1 Liblept5 lLiblzma-dev Libminizip1 lLibnetcdf-c++4 Libnetcdf15

7) Enter the command to open the annotation software:

python3 labelImg.py

S$ python3 LabelImg.py

LlabelImg.py:213: DeprecationWarning: an integer is required (got type DockWidge

Erne
e
HR
Bob to)

re,
io PRIVEE dog
ASARER

>
F—NEe

+
Bt

w
Em

PascalvOC

xR

8) The icon functions are outlined in the below table:

‘AZ Select the directory where the
Ctrl+U

Open Dir picture is saved.




=== Page 6 ===
Hiweamn oer Shenzhen Hiwonder Technology Co,Ltd

AZ, Select the directory where the
Ctrl+R
Change Save Dir calibration data is saved.
a. ,
W Create annotation box

ae Ctrl+S Save annotation

A Swap to the previous image
Prev Image

>

D Swap to the next image
Next Image

9) Use the shortcut “Ctrl+U,” select the image storage directory as

“/home/ubuntu/Desktop/my_data/JPEGImages/,” and click the “Open”

button.

labelimg - Open Directory

4 | Gfubuntu | (Desktop my_data JPEGImages »

© Recent

GG} Home

© Desktop
[) Documents
& Downloads
JJ Music

f) Pictures
i Videos

) labelimg

[ L4T-README

+ Other Locations



=== Page 7 ===
Hiweander Shenzhen Hiwonder Technology Co,Ltd

10) Use the shortcut “Ctrl+R,” select the annotation data directory as
“[home/hiwonder/Desktop/my_data/Annotations/,” and click the “Open”

button.

Cancel labelimg - Save annotations to the directory

® Recent 4 Gfubuntu  ()Desktop | my_data | Annotations @}

G} Home

(© Desktop
[ Documents
& Downloads
J Music

() Pictures
I Videos

©) labelimg

(2) L4T-README

+ Other Locations

11) Press “W” to create an annotation box.

Move the mouse to the appropriate position, press and hold the left mouse
button to drag and create a bounding box that covers the entire target
recognition content. Release the left mouse button to complete the selection of

the target content.

Note: The object in the image below is only for demonstrating how to perform
annotations and is not included in the materials package provided. You can select

any object for annotation and set any label name.




=== Page 8 ===
Hiweamn oer Shenzhen Hiwonder Technology Co,Ltd
<a

wv

In the pop-up window, name the target recognition category, for example, “left.”

After naming, click the “OK” button or press “Enter” key to save the category.

Note: Labels can be named with any desired name.

labelimg x

“Cancel | w OK |

|

dog =
person

cat

tv

car

meatballs

marinara sauce

tomato soup

chicken noodle soup

french onion soup

chicken breast mr

1) Use the shortcut key “Ctrl+tS” to save the annotation data for the

current image.



=== Page 9 ===
Hivwoander Shenzhen Hiwonder Technology Co,Ltd

2) Press “D” to move to the next image for annotation. Same steps are

applies to the annotation for the remaining images.

3) To facilitate annotation, check the option for the automatic saving in the

software. Then follow the previous annotation steps to operate:

View Help

| ¥ Auto Save mode

Single Class Mode Ctrl+Shift+S
Display Labels Ctrl+Shift+P

4) Click in the system status bar to open the file manger, then

navigate to the directory “~/Desktop/my_data/Annotations’” to view the

annotation files for the images.

G} Home Desktop my_data Annotations ~
® Recent
* Starred 1.xml 2.xml 3.xml 4.xml 5.xml 6.xml 7.xml
Gat Home
(© Desktop 8.xml 9.xml 10.xml 11.xml 12.xml 13.xml 14.xml
[=] Documents
% Downloads 15.xml 16.xml 17.xml 18.xml 19.xml 20.xml
JJ Music

3. Format Conversion

tS: MARCHREFPRERADS, BAA “Tab” ee XRia.

Note: the entered command should be case sensitive and “Tab” key can be

used to auto-complete keywords.

1) Power on Jetson Orin Nano, and connect it to the system desktop

using NoMachine.



=== Page 10 ===
Hiweander Shenzhen Hiwonder Technology Co,Ltd

2) Minimize NoMachine desktop, and drag “xml2yolo.py” provided in
“Appendix/ Al Course” to NoMachine desktop.

® data_gather

&B labelimg

FF tensorflow-2.11.0+nv23.01-cp38-cp3...
FP torch-1.12.0a0+2c91 6ef.nv22.3-cp38-...

2022/10/13 11:3 i @| ,

2024/2/24 15:18 SEE ZIP Areesze 14 / “ml2yol6. ps

3) Double click to open the command0O-line terminal.

4) Enter the command and press Enter.

cp ./Desktop/xml2yolo.py ./Desktop/my_data/

S$ cp ./Desktop/xml2yolo.py ./Desktop/my data/

5) Run the command:

cd Desktop/my_data/

:~$ cd Desktop/my_data/

6) Run the command:

gedit classes.names

$ gedit classes.names

7) Edit the file and enter the class name you annotated, such as “left.” If
you added other categories during the annotation process, make sure to add
them to this document in the correct order. Press the shortcut “Ctrl + S” or click

the “Save” button in the upper right corner to save and exit.

Open ~ m classes.names Save = _ a 7

10



=== Page 11 ===
Hiweander Shenzhen Hiwonder Technology Co,Ltd

Note: The class names added here must match those used in the image

annotation software “labellmg’.

8) Enter the command to navigate back to the desktop directory (which is
the parent directory of the “my_data’” folder). If you have moved your “my_data”
folder to a different location, adjust the command accordingly to go to the

parent directory.

cd ..

9) nter the command to convert the data format and press Enter. If the

prompt shown in the image appears, the conversion was successful.

python3 xml2yolo.py --data /home/ubuntu/Desktop/my_data --yaml /home/ubuntu/Desktop/my_data/data.yaml

python3 xml2yolo.py --data /home/ubuntu/Desktop/my_data --yaml /home/ubuntu/Desktop/my_data/data.yamlfj

Note: The content shown in the image is for reference only. Due to variations in
the number and names of labels, the details may differ. The changes will depend on

the number and names of the labels you have set.

11


